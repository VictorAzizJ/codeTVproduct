{"version":3,"file":"background.bundle.js","mappings":";;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;ACTA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AADA;AAEA;AAAA;AAAA;AAgDA;AAAA;AAhDA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAvBA;AAAA;AAyBA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAEA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AAEA","sources":["webpack:///./src/background/api.js","webpack:///./src/background/prompt.js","webpack:///./src/background/question.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./src/background/index.js"],"sourcesContent":["import { generateQuestion } from './question.js';\n\nexport function handleMessages(request, sender, sendResponse) {\n  if (request.action === 'getQuestion') {\n    generateQuestion(request.settings)\n      .then(result => sendResponse(result))\n      .catch(error => sendResponse({ error: error.message }));\n    return true;\n  }\n}","export function buildPrompt(settings) {\n  const { questionType, difficulty, customPrompt } = settings;\n  \n  if (customPrompt?.trim()) {\n    return `${customPrompt}\\n\\nGenerate one question at ${difficulty} difficulty. Return as JSON: {\"question\": \"...\", \"answer\": \"...\"}`;\n  }\n\n  const basePrompt = {\n    'math': 'Generate a math problem',\n    'science': 'Generate a science question (biology, chemistry, or physics)',\n    'history': 'Generate a history question',\n    'geography': 'Generate a geography question',\n    'language': 'Generate a vocabulary or grammar question',\n    'trivia': 'Generate a fun trivia question',\n    'general': 'Generate a general knowledge question'\n  }[questionType] || 'Generate a general knowledge question';\n\n  return `${basePrompt} at ${difficulty} difficulty. The answer should be 1-3 words. Return as JSON: {\"question\": \"...\", \"answer\": \"...\"}`;\n}","import { buildPrompt } from './prompt.js';\n\nexport async function generateQuestion(settings) {\n  try {\n     const apiKey = process.env.API_KEY;\n    if (!apiKey) throw new Error('API key not configured');\n    \n    const prompt = buildPrompt(settings);\n    const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${apiKey}`,\n        'Content-Type': 'application/json',\n        'HTTP-Referer': chrome.runtime.getURL(''),\n        'X-Title': 'Study Checkout Extension'\n      },\n      body: JSON.stringify({\n        model: settings.model || 'openai/gpt-3.5-turbo',\n        messages: [\n          {\n            role: 'system',\n            content: 'You are a helpful quiz generator...'\n          },\n          {\n            role: 'user',\n            content: prompt\n          }\n        ],\n        temperature: 0.7,\n        max_tokens: 200\n      })\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(`API error: ${errorData.error?.message || response.statusText}`);\n    }\n\n    const data = await response.json();\n    const content = data.choices[0].message.content;\n    \n    try {\n      return JSON.parse(content);\n    } catch (e) {\n      return parseQuestionFromText(content);\n    }\n  } catch (error) {\n    console.error('Question generation error:', error);\n    throw error;\n  }\n}\n\nfunction parseQuestionFromText(text) {\n  const questionMatch = text.match(/[Qq]uestion[:\\s]+(.+?)(?=[Aa]nswer|$)/s);\n  const answerMatch = text.match(/[Aa]nswer[:\\s]+(.+?)$/s);\n\n  return {\n    question: questionMatch?.[1]?.trim() || text.substring(0, 200),\n    answer: answerMatch?.[1]?.trim() || 'Unable to parse answer'\n  };\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { handleMessages } from './api.js';\nimport { generateQuestion } from './question.js';\n\nchrome.runtime.onMessage.addListener(handleMessages);"],"names":[],"sourceRoot":""}